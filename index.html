<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta name="referrer" content="no-referrer" />
    <title>HKPHTÃ…GMMS USB1</title>
    <script src='https://code.jquery.com/jquery-3.3.1.min.js' integrity='sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8='
        crossorigin='anonymous'></script>
    <style>
        video, #jada {
            max-width: 50%;
            max-height: 50%;
            min-width: 50%;
            min-height: 50%;
        }

        #jada {
            display: none;
        }

        body {
            text-align: center;
            font-family: 'Comic Sans MS', sans-serif;
        }

        #inspirasjon span {
            font-size: 30px;
            text-shadow: 1px 0px black;
            display: inline-block;
        }

        button {
            border: 30px dotted red;
            border-radius: 200px 100px 50px 1px;
            box-shadow: 5px 10px greenyellow;
            text-shadow: 50px 1px pink;
        }
    </style>
</head>

<body>
    <iframe width="1" height="1" src="https://www.youtube.com/embed/M8PaeEhBPqY?autoplay=1&loop=1&playlist=M8PaeEhBPqY"
        frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <div id='inspirasjon'>Putte?</div>
    <marquee behavior='alternate'>
        <button type='button' onclick='javascript:gjorAltSammem()'>Gi meg mer da</button>
    </marquee>
    <br>
    <div id='hvaserdupaa'>
        <video autoplay muted loop id='hvavilduda'>
        </video>
        <img id='jada' />
    </div>
    <!-- hitwebcounter Code START -->
    <a href="http://www.hitwebcounter.com" target="_blank">
        <img title="" Alt="" border="0" id="hvormangeda">
    </a>
    <script type='text/javascript'>
        var API_URL = 'http://cors-anywhere.herokuapp.com/http://a.4cdn.org/gif/catalog.json';
        var PASSORDEM = 'avangsert';
        var LYLLEHARAM = ['skolen', 'gore', 'rekt', 'war', 'gondola', 'ygyl', 'ylyl', 'boomer', 'birb', 'bird', 'caturday', 'fight'];
        var TYTTELEM = 'Putte?';
        var FARGEM = ['yellow', 'pink', 'red', 'blue', 'yellowgreen'];
        var BRA_URL = 'http://hitwebcounter.com/counter/counter.php?page=6975323&style=0044&nbdigits=6&type=page&initCount=0'

        if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            var FILTEM = ['.gif'];
        } else {
            var FILTEM = ['.webm', '.gif'];
        }

        var getContent = function () {
            return new Promise(function (resolve) {
                $.ajax(
                    {
                        url: API_URL,
                        method: 'GET'
                    })
                    .done(function (data) {
                        resolve(data);
                    })
                    .fail(function () { alert('hold kjeft potethore') });
            });
        };

        var sorterOgHentKomplexemNSFW = function (dataKomplexem) {
            var alleTraadem = [];
            dataKomplexem.map(function (enSydem, index) {
                alleTraadem = alleTraadem.concat(enSydem.threads);
            });
	        var nestemAlleTraadem = [];
            alleTraadem.map(function (traad, index) {
				if (!(LYLLEHARAM.some((ordem) => (traad.com || '').toLowerCase().indexOf(ordem) > -1))) {
                	nestemAlleTraadem.push(traad);
				}
            });

            var komplexem = Math.floor(1 + Math.random() * (nestemAlleTraadem.length - 1));
            return nestemAlleTraadem[komplexem];
        };

        var hentKomplexemByldem = function (komplexemObjektem) {
            var komplexemAPI = `http://cors-anywhere.herokuapp.com/http://a.4cdn.org/gif/thread/${komplexemObjektem.no}.json`;
            return new Promise(function (resolve) {
                $.ajax(
                    {
                        url: komplexemAPI,
                        method: 'GET'
                    })
                    .done(function (data) {
                        resolve(data);
                    })
                    .fail(function () { alert('hold kjeft jeg fant dem ikke drikk vestkyst') });
            });
        };

        var visMegForFaen = function (komplexemTraadem) {
            var alleKomplexemPostem = komplexemTraadem.posts.filter(function (komplexemElementym) {
                return komplexemElementym.hasOwnProperty('ext') && (FILTEM.indexOf(komplexemElementym.ext) !== -1);
            });
            var eeeeenKomplexemBlantAlleKomplexemPostem = alleKomplexemPostem[Math.floor(Math.random() * alleKomplexemPostem.length)];
            var lenkem = `${eeeeenKomplexemBlantAlleKomplexemPostem.tim}${eeeeenKomplexemBlantAlleKomplexemPostem.ext}`;

            console.log(`SAUS: http://boards.4chan.org/gif/thread/${komplexemTraadem.posts[0].no}#p${eeeeenKomplexemBlantAlleKomplexemPostem.no}`);
            if (eeeeenKomplexemBlantAlleKomplexemPostem.ext.indexOf('.gif') !== -1) {
                document.getElementById('hvavilduda').setAttribute('src', lenkem);
                $('#hvavilduda').hide();
                $('#jada').attr('src', '//i.4cdn.org/gif/' + lenkem);
                $('#jada').css('display', 'inline-block');
            } else {
                $('#jada').hide();
                $('#hvavilduda').attr('src', '//i.4cdn.org/gif/' + lenkem);
                $('#hvavilduda').css('display', 'inline-block');
            }
        }

        var gjorAltSammem = function () {
            $('body').css('background', FARGEM[Math.floor(Math.random() * FARGEM.length)]);
            $('button').css('background', FARGEM[Math.floor(Math.random() * FARGEM.length)]);
            $('button').css('border-color', FARGEM[Math.floor(Math.random() * FARGEM.length)]);
            $('button').css('color', FARGEM[Math.floor(Math.random() * FARGEM.length)]);
            $('#inspirasjon').html(TYTTELEM.split('').map(function (bokstavem) {
                return `<span style='transform: rotate(${Math.floor(Math.random() * 20) - 10}deg); color: ${FARGEM[Math.floor(Math.random() * FARGEM.length)]};'>${bokstavem}</span>`;
            }).join(''));

            $(document).find("#hvormangeda").attr('src', BRA_URL + '&timestamp=' + new Date().getTime());

            getContent()
                .then(sorterOgHentKomplexemNSFW)
                .then(hentKomplexemByldem)
                .then(visMegForFaen);
        };


        gjorAltSammem();

    </script>


</body>

</html>
